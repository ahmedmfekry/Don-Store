# ملخص مشروع تطبيق إدارة مخزون الدم

## نظرة عامة

تم إنشاء تطبيق Android كامل لإدارة مخزون التبرع بالدم في المركز الإقليمي لنقل الدم بالإسماعيلية. التطبيق يدعم اللغة العربية بالكامل ويستخدم Firebase للمصادقة وقاعدة البيانات.

## المكونات الرئيسية

### 1. واجهات المستخدم (Activities)

#### أ. LoginActivity
- تسجيل الدخول بحساب Google
- التحقق من حالة تسجيل الدخول التلقائي
- التوجيه التلقائي للواجهة الرئيسية عند نجاح تسجيل الدخول

#### ب. MainActivity
- الواجهة الرئيسية للتطبيق
- عرض قوائم للوظائف الرئيسية:
  - إضافة صنف
  - إضافة مخزون
  - صرف مخزون
  - المرتجع
- قائمة تسجيل الخروج

#### ج. AddItemActivity
- إضافة أسماء الأصناف الجديدة
- الحقول: اسم الصنف
- حفظ البيانات في Firestore

#### د. AddStockActivity
- إضافة طلبيات جديدة للمخزن
- الحقول:
  - تاريخ الإضافة
  - اسم الصنف (قائمة منسدلة)
  - العدد
  - الوحدة
  - LOT Number
  - تاريخ الانتهاء
  - ملاحظات
- اختيار التاريخ من DatePicker

#### ه. DispenseStockActivity
- صرف الأصناف للحملات الخارجية
- نفس الحقول مثل AddStockActivity
- حفظ كـ type: "dispense"

#### و. ReturnStockActivity
- إضافة الأصناف المرتجعة من الحملات
- الحقول:
  - التاريخ
  - اسم الصنف (قائمة منسدلة)
  - العدد
  - الوحدة
  - LOT Number
  - تاريخ الانتهاء
- حفظ كـ type: "return"

### 2. الخدمات والمساعدات

#### ExpirationNotificationService
- فحص الأصناف التي تقترب من انتهاء الصلاحية
- إرسال إشعارات عند وجود أصناف تنتهي خلال 30 يوم
- يعمل بشكل دوري يومياً
- يستخدم WorkManager للجدولة

#### BootReceiver
- إعادة جدولة فحص انتهاء الصلاحية بعد إعادة تشغيل الجهاز

### 3. قاعدة البيانات (Firebase Firestore)

#### Collection: items
```json
{
  "name": "اسم الصنف",
  "userId": "معرف المستخدم",
  "createdAt": 1234567890
}
```

#### Collection: stock
```json
{
  "date": "2024-01-15",
  "itemName": "اسم الصنف",
  "quantity": 100,
  "unit": "وحدة",
  "lotNumber": "LOT123",
  "expireDate": "2024-12-31",
  "notes": "ملاحظات اختيارية",
  "userId": "معرف المستخدم",
  "type": "add|dispense|return",
  "createdAt": 1234567890
}
```

### 4. التصميم

- استخدام Material Design Components
- ألوان مخصصة (أحمر الدم)
- دعم RTL للغة العربية
- واجهات احترافية مع CardView
- TextInputLayout مع OutlinedBox style
- DatePicker للتواريخ

## الميزات

✅ تسجيل الدخول بحساب Google  
✅ إضافة الأصناف  
✅ إضافة المخزون (الطلبيات)  
✅ صرف المخزون للحملات  
✅ إضافة المرتجع  
✅ الإشعارات التلقائية قبل انتهاء الصلاحية  
✅ دعم اللغة العربية كاملاً  
✅ تصميم احترافي وحديث  

## الخطوات التالية للإعداد

1. إنشاء مشروع Firebase
2. إضافة تطبيق Android في Firebase
3. تنزيل ملف `google-services.json`
4. إعداد Google Sign-In
5. إنشاء Firestore Database
6. تحديث Web Client ID في `strings.xml`
7. بناء وتشغيل التطبيق

راجع ملف `SETUP.md` للتفاصيل الكاملة.

## الملفات المهمة

- `app/build.gradle` - التبعيات والإعدادات
- `app/src/main/AndroidManifest.xml` - إعدادات التطبيق
- `app/src/main/res/values/strings.xml` - النصوص والموارد
- `app/src/main/res/layout/` - ملفات التخطيط
- `app/src/main/java/com/bloodinventory/bloodinventory/` - الكود المصدري

## ملاحظات

- التطبيق يحتاج اتصال بالإنترنت للعمل
- البيانات محفوظة في Firebase Firestore
- كل مستخدم يرى فقط بياناته الخاصة
- الإشعارات تعمل تلقائياً يومياً

## الدعم الفني

للمساعدة في الإعداد أو حل المشاكل، راجع:
- `README.md` - معلومات عامة
- `SETUP.md` - دليل الإعداد التفصيلي

